<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Service Cost Breakdown</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333; background: #fff; }
    h2 { color: #2c3e50; margin-bottom: 12px; }

    .services-table { background: white; border-radius: 8px; overflow: hidden; border: 1px solid #e0e0e0; }
    .table-header { background: #f8f9fa; padding: 15px 20px; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #2c3e50; }
    .table-content { max-height: 400px; overflow-y: auto; }
    .table-row { display: grid; grid-template-columns: 2fr 1fr 1fr; padding: 12px 20px; border-bottom: 1px solid #f0f0f0; align-items: center; }
    .table-row:hover { background: #f8f9fa; }
    .table-header-row { background: #f8f9fa; font-weight: 600; color: #666; border-bottom: 2px solid #e0e0e0; }
    .table-cell { padding: 8px 0; }
    .cost-value { font-weight: 500; color: #2c3e50; }
  </style>
</head>
<body>
  <h2>Service Cost Breakdown</h2>
  <div class="services-table">
    <div class="table-header">Service Cost Breakdown</div>
    <div class="table-content">
      <div class="table-row table-header-row">
        <div class="table-cell">Service Name</div>
        <div class="table-cell">Billed</div>
        <div class="table-cell">Effective</div>
      </div>
      <div id="services-table-body"></div>
    </div>
  </div>

  <script>
    function getData() {
      if (window.openai && window.openai.toolOutput) {
        const t = window.openai.toolOutput; return t.structuredContent ?? t;
      }
      if (window.__mcpContent) {
        return window.__mcpContent.structuredContent ?? window.__mcpContent;
      }
      return {
        services: [
          { name: 'Amazon Dynamo - Indexed Data Store', billed: 2500, effective: 2400 },
          { name: 'Azure Compute', billed: 2800, effective: 2750 }
        ]
      };
    }

    function renderServices() {
      const root = document.getElementById('services-table-body');
      root.innerHTML = '';
      const rows = (window.data?.services) || [];
      rows.forEach(service => {
        const row = document.createElement('div');
        row.className = 'table-row';
        row.innerHTML = `
          <div class="table-cell">${service.name}</div>
          <div class="table-cell cost-value">$${(service.billed||0).toLocaleString()}</div>
          <div class="table-cell cost-value">$${(service.effective||0).toLocaleString()}</div>
        `;
        root.appendChild(row);
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      window.data = getData();
      renderServices();
    });
  </script>
</body>
</html>
